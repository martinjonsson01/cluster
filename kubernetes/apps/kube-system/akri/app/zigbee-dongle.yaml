apiVersion: akri.sh/v0
kind: Configuration
metadata:
  name: akri-zigbee-dongle
spec:
  capacity: 1

  discoveryHandler:
    name: udev
    discoveryDetails: |+
      groupRecursive: true # Recommended unless using very exact udev rules
      udevRules:
      - ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="ea60"

  brokerSpec:
    brokerPodSpec:
      containers:
        - name: zigbee-dongle-broker
          image: ammmze/akri-ser2net-broker:1.1.0
          imagePullPolicy: IfNotPresent
          securityContext:
            privileged: true
          env:
            - name: DEVICE_OPTIONS
              value: "115200"
          ports:
            - name: device
              containerPort: 2000
          resources:
            requests:
              "{{PLACEHOLDER}}": '1'
              cpu: 10m
              memory: 50Mi
            limits:
              "{{PLACEHOLDER}}": '1'
              cpu: 100m
              memory: 200Mi

  configurationServiceSpec:
    type: ClusterIP
    ports:
      - name: device
        port: 2000
        protocol: TCP
        targetPort: device
